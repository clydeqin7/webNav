<!DOCTYPE html>
<html lang="zh-hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>网站地图</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <kbd class="test">s</kbd>
    </header>
    <main >
        <div class="mainWrapper" id="mainxx"></div>
    </main>
    <footer></footer>
    <script>
        var keyboards = {
            0:['q','w','e','r','t','y','u','i','o','p'],
            1:['a','s','d','f','g','h','j','k','l'],
            2:['z','x','c','v','b','n','m'],
            'length':3
        }
        var hash = {
            'q':'qq.com',
            'w':'weibo.com',
            'e':'',
            'r':'',
            't':'taobao.com',
            'y':'youku.com',
            'u':'uc.com',
            'i':'iqiyi.com',
            'o':'opera.com',
            'p':'',
            'a':'amazon.com',
            's':'',
            'd':'doupan.com',
            'f':'',
            'g':'google.com',
            'h':'',
            'j':'jd.com',
            'k':'',
            'l':'',
            'z':'zhihu.com',
            'x':'',
            'c':'',
            'v':'',
            'b':'',
            'n':'',
            'm':'meituan.com'
        }

        // 取出loaclStorage的hash
        hashInLocalStorage = JSON.parse(localStorage.getItem('cHash') || 'null')
        if(hashInLocalStorage){
            hash = hashInLocalStorage
        }

        index = 0   
        while(index < keyboards.length) { //keyboards['length']
            div1 =  document.createElement('div')
            kbdIndex = 0

            while(kbdIndex < keyboards[index].length) {
                ckbd = document.createElement('kbd')
                ckbd.textContent = keyboards[index][kbdIndex]
                buttonX = document.createElement('button')
                buttonX.id = keyboards[index][kbdIndex]
                buttonX.textContent = "编辑"
                ckbd.appendChild(buttonX)

                buttonX.onclick = function(xdfsf){
                    key = xdfsf['target']['id'] //得到哪个键点击了编辑
                    x = prompt('请输入一个网址') //获取用户输入的内容  
                    if(x){
                        hash[key] = x //将修改内容替换到hash中
                    }
                    //将修改后的hash存到localStorage
                    localStorage.setItem('cHash', JSON.stringify(hash))
                }

                div1.appendChild(ckbd)
                kbdIndex = kbdIndex + 1
            }

            mainxx.appendChild(div1)
            index = index + 1
        }

        document.onkeypress = function(xsjkdjfa) {
          key = xsjkdjfa['key']
          website = 'http://' + hash[key]
          //location.href = website //当前页面跳转
          window.open(website, '_blank')
        }
    </script>
</body>
</html>